<?php 
//for sso-login buttons

	$facebookLoginUrl = "https://www.facebook.com/dialog/oauth?"
			. "client_id=" . $config->facebook_sso->app_id
			. "&redirect_uri=" . $config->facebook_sso->redirect_url
			. "&state=" . md5(uniqid(rand(), TRUE))
			. "&response_type=code"
					. "&scope=user_about_me,email";

	$googleLoginUrl = "https://accounts.google.com/o/oauth2/auth?"
			. "client_id=" . $config->google_sso->client_id
			. "&redirect_uri=" . $config->google_sso->redirect_url
			. "&state=" . md5(uniqid(rand(), TRUE))
			. "&response_type=code"
					. "&scope=https://www.googleapis.com/auth/plus.login profile email" // openid%20profile
					. "&include_granted_scopes=true";

?>
<!DOCTYPE html>
<html>
	<head>
		<title>Baby Search - Login</title>
		<link rel="stylesheet" type="text/css" href="/css/index.css">
		<link rel="stylesheet" type="text/css" href="/css/login.css">
		<script src="/js/jquery-1.11.3.min.js"></script>
		<script src="/js/jquery.form.js"></script>
	</head>

	<body>
		<div id="header">
			<img src="/img/01/logo-01.png"/>
		</div>
		
		<div id="banner_container">
			<img src="/img/01/pic-01.png"></img>
		</div>
		
		<div id="login_container">
			<a href="<?php echo $facebookLoginUrl; ?>">
				<div class='sso'>
					<img src="/img/01/bu-01.png"></img>
					<p>登入</p>
				</div>
			</a>
			<a href="<?php echo $googleLoginUrl; ?>">
				<div class='sso'>
					<img src="/img/01/bu-02.png"></img>
					<p style='color:#9B9B9B;'>登入</p>
				</div>
			</a>
			<div class="clear"></div>
		</div>
<!-- 
		<div id="menuList_container">
			<ul>
				<a href="">
					<li class="odd">關 於 我 們</li>
				</a>
				<a href="">
					<li class="even">我 們 的 產 品</li>
				</a>
				<a href="">
					<li class="odd">特 色 與 功 能</li>
				</a>
				<a href="">
					<li class="even">支 援 與 下 載</li>
				</a>
				<a href="">
					<li class="odd">店 舖 位 置</li>
				</a>
				<a href="">
					<li class="even">常 見 問 題</li>
				</a>
				<a href="">
					<li class="odd">使 用 條 款</li>
				</a>
				<a href="">
					<li class="even">隱 私 權 政 策</li>
				</a>
			</ul>
		</div>
 -->		
		<div id="article_container">
			<p  class='green'>聯絡我們</p>
			<p>電話 : 02-1234-5678</p>
			<p>信箱 : info@babysearch.com</p>
		</div>
		<div id="newsfeed_container">
			<ul>
				<li style='width:25%;' class="green_text">我們的消息</li>
				<li style='width:10%;'><a href='#' target='_blank'><img src='/img/01/icon-01.png'/></a></li>
				<li style='width:10%;'><a href='#' target='_blank'><img src='/img/01/icon-02.png'/></a></li>
				<li style='width:55%;'></li>
			</ul>
		</div>
		<div id='download_container'>
			<ul>
				<li style='width:25%;' class="green_text">APP下載</li>
				<li style='width:10%;'><a href='#' target='_blank'><img src='/img/01/icon-03.png'/></a></li>
				<li style='width:10%;'><a href='#' target='_blank'><img src='/img/01/icon-04.png'/></a></li>
				<li style='width:55%;'></li>
			</ul>
		</div>
		<br/><br/><br/>
		
		<!-- 
		<h3>This is an ajaxform test</h3>
	
		<form id="ajaxform" action="index" method="POST">
			Name: <input type="text" id="formName" name="name" required/> <br/>
		    Email: <input type="email" id="formEmail" name="email" value="" required/> <br/>
		    <input type="submit" value="註册"/>
		</form>
		
		 
		
		<script>

        // wait for the DOM to be loaded 
        $(document).ready(function() { 

            // bind 'myForm' and provide a simple callback function 
            $('#ajaxform').ajaxForm({
				beforeSerialize:function(){
	                var formData = $("#formEmail").val();
	                var status = "";
	                
	                $.ajax({
		                async: false,
	    				url: '/user/checkEmailExists',
	    				type: "post",
	    				data: {"formKey" : formData},
	    				success: function(data) {
							if(data.status == 'success') {
								console.log("status return success");
								status = true;

								//stores email into SESSION upon successful login
								$_SESSION['email'] = formData;
							}
							else {
								console.log("status return fail");
								status = false;
							}
							
	        				/**
	        				console.log("success");
	        				var x;
	     
	    					for(i=0; i<data.length; i++) {

	    						x = data[i];
	    						//console.log(x["id"]);
	    						//console.log(x["name"]);
	    					}

	    					if(formData == x["name"])
	        					console.log("Sorry, user name '" + x["name"] + "' already existed in the system. " +
	                					"Please try another user name.");
	    					**/
	    				}
	    			});
	                //console.log(status);
	    			return status;
				},
				success:function() {
					console.log("success");
				}
            });
        });
	</script>
	-->
	
		<div id="footer">
			<p class="center">Copyright @ 2015 Baby Search Inc.</p>
		</div>
	</body>
</html>